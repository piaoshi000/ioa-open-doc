## 1. 接口描述
接口名：CreateApproval

调用方：iOA服务

被调方：第三方协议转换服务

用途：发起审批

## 2. 输入参数
| 参数名 | 类型                                                      |  是否必选| 描述 | 示例 |
|---------|---------------------------------------------------------|---------|---------|---------|
| TaskID | string                                                  |是|iOA审批单号，iOA保证唯一性|20250916203001abcdefgh|
| Title | [Language](/第三方对接/审批/数据结构.md#Language)                  | 是|审批标题 |
| Abstract | [Language](/第三方对接/审批/数据结构.md#Language)                  |是| 摘要 |
| Detail | Array of [KeyValue](/第三方对接/审批/数据结构.md#KeyValue)         |是| 详情 |
| Applicant | [UserInfo](/第三方对接/审批/数据结构.md#UserInfo)                  |是| 申请人 |
| Approvers | Array of [ApproverInfo](/第三方对接/审批/数据结构.md#ApproverInfo) |是| 审批人，当前只需要支持一个审批节点, 即数组大小为1 |
| ExpireTime | int64                                                   |是| 时间戳单位秒，过期时间<br>超过这时间收到回调会报错 | 1758015739


## 3. 输出参数
| **参数名** |  **类型** |  **是否必选**| **描述** | 
| ------ | ------ | ------ | ------ | 
| RequestId | String | 是 | ID，由被调方生成，每次请求都会返回（若请求因其他原因未能抵达服务端，则该次请求不会获得 RequestId）。定位问题时需要提供该次请求的 RequestId。|
| Data | [CreateApprovalRespData](/第三方对接/审批/数据结构.md#CreateApproveRespData) | 审批返回数据<br/>注意：此字段可能返回 null，表示取不到有效值。|


## 4. 示例
#### 输入示例

``` 
POST / HTTP/1.1
Content-Type: application/json
X-Tc-Action: CreateApprovalRespData
X-Tc-Version: 2022-06-01
X-Tc-Timestamp: 1761214506
Authorization: *******
{
    "TaskID": "20250916203001abcdefgh",
    "Title": {
        "Cn": "DLP审批申请",
        "En": ""
    },
    "Abstract": {
        "Cn": "文件详情",
        "En": ""
    },
    "Detail": [
        {
            "Key": {
                "Cn": "文件名称",
                "En": ""
            },
            "Value": {
                "Cn": "财报.pdf",
                "En": ""
            }
        },
        {
            "Key": {
                "Cn": "发送通道",
                "En": ""
            },
            "Value": {
                "Cn": "微信",
                "En": ""
            }
        }
    ],
    "Applicant": {
        "UserID": "brucewang",
        "UserName": "王小明"
    },
    "Approvers": [
        {
            "Attr": "or",
            "Approver": [
                {
                    "UserID": "fireli",
                    "UserName": "李三",
                    "UserType": "self"
                },
                {
                    "UserID": "brucewang",
                    "UserName": "王小明",
                    "UserType": "leader"
                }
            ]
        }
    ],
    "ExpireTime": 1758015739
}
```

#### 输出示例
成功

ThirdNo为第三方自己的单号，第三方保证唯一就可以。如果第三方没有自己的单号，ThirdNo可直接用TaskID值。
``` 
{
    "Response": {
        "Data": {
            "ThirdNo": "20250916203001abcdefgh"
        },
        "RequestId": "69cc6953-259a-4414-9a86-172744f3032a"
    }
}
```

失败
``` 
{
    "Response": {
        "Error": {
            "Code": "AuthFailure.SignatureFailure",
            "Message": "The provided credentials could not be validated. Please check your signature is correct."
        },
        "RequestId": "ed93f3cb-f35e-473f-b9f3-0d451b8b79c6"
    }
}
```

## 5. 错误码
| Code | 解释 |
| ------ | ------ |
| AuthFailure.SignatureFailure | 签名错误 |
| InvalidParameter.RequestParam| 参数错误 |
| InternalError.DatabaseException | 数据库异常 |
| InternalError.Unknown | 内部错误 | 